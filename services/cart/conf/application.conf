play {
  http {
    secret.key = "change-me-in-production"
    secret.key = ${?PLAY_HTTP_SECRET_KEY}
  }
  server {
    http {
      port = ${?PORT}
      port = 9002
    }
  }
  evolutions {
    enabled = true
    autoApply = true
  }
  filters {
    enabled += "play.filters.cors.CORSFilter"
    disabled += "play.filters.csrf.CSRFFilter"
  }
}

db {
  default {
    driver = "org.postgresql.Driver"
    url = "jdbc:postgresql://postgres-service.postgres.svc.cluster.local:5432/cart_db"
    username = ${DB_USERNAME}
    password = ${DB_PASSWORD}
    logSql = false
  }
}

redis {
  host = "localhost"
  host = ${?REDIS_HOST}
  port = 6379
  port = ${?REDIS_PORT}
  password = ${?REDIS_PASSWORD}
  database = 0
  database = ${?REDIS_DATABASE}
  timeout = 2000
}

catalog {
  service {
    url = "http://catalog-service.catalog.svc.cluster.local:8082"
    url = ${?CATALOG_SERVICE_URL}
  }
}

    inventory {
      service {
        url = "http://inventory-service.inventory.svc.cluster.local:8083"
        url = ${?INVENTORY_SERVICE_URL}
        internal {
          api {
            token = ${?INVENTORY_INTERNAL_API_TOKEN}
          }
        }
      }
    }
    
    order {
      service {
        url = "http://order-service.order.svc.cluster.local:8084"
        url = ${?ORDER_SERVICE_URL}
        internal {
          api {
            token = ${?ORDER_INTERNAL_API_TOKEN}
          }
        }
      }
    }

kafka {
  bootstrap.servers = "localhost:9092"
  bootstrap.servers = ${?KAFKA_BOOTSTRAP_SERVERS}
  topics {
    cart.events = "cart.events"
    cart.events = ${?KAFKA_CART_EVENTS_TOPIC}
  }
}

auth0 {
  domain = "your-tenant.auth0.com"
  domain = ${?AUTH0_DOMAIN}
  audience = ${?AUTH0_AUDIENCE}
}

akka {
  loglevel = "INFO"
}

play.filters.cors {
  allowedOrigins = ["https://buyit.local", "https://admin.local", "https://seller.local", "http://localhost:3000", "http://localhost:3001", "http://localhost:3002", "http://localhost:5173"]
  allowedHttpMethods = ["GET", "POST", "PUT", "PATCH", "DELETE", "OPTIONS", "HEAD"]
  allowedHttpHeaders = ["Accept", "Content-Type", "Authorization", "Origin", "X-Requested-With"]
  exposedHeaders = []
  supportsCredentials = true
  preflightMaxAge = 3 days
}

# Allow Kubernetes health check probes
# Kubernetes sends health checks with pod IPs in the Host header
play.filters.hosts {
  allowed = ["."]
}
