play {
  http {
    secret.key = "change-me-in-production"
    secret.key = ${?PLAY_HTTP_SECRET_KEY}
  }
  server {
    http {
      port = ${?PORT}
      port = 9006
    }
  }
  filters {
    enabled += "play.filters.cors.CORSFilter"
    disabled += "play.filters.csrf.CSRFFilter"
  }
}

kafka {
  bootstrap.servers = "localhost:9092"
  bootstrap.servers = ${?KAFKA_BOOTSTRAP_SERVERS}
  topics {
    fulfillment.events = "fulfillment.events"
    fulfillment.events = ${?KAFKA_FULFILLMENT_EVENTS_TOPIC}
  }
}

order {
  service {
    url = "http://order-service.order.svc.cluster.local:8084"
    url = ${?ORDER_SERVICE_URL}
    internal {
      api {
        token = ${?ORDER_INTERNAL_API_TOKEN}
      }
    }
  }
}

auth0 {
  domain = "your-tenant.auth0.com"
  domain = ${?AUTH0_DOMAIN}
  audience = ${?AUTH0_AUDIENCE}
}

fulfillment {
  internal {
    api {
      token = ${?FULFILLMENT_INTERNAL_API_TOKEN}
    }
  }
}

akka {
  loglevel = "INFO"
}

play.filters.cors {
  allowedOrigins = ["https://buyit.local", "https://admin.local", "https://seller.local", "http://localhost:3000", "http://localhost:3001", "http://localhost:3002", "http://localhost:5173"]
  allowedHttpMethods = ["GET", "POST", "PUT", "PATCH", "DELETE", "OPTIONS", "HEAD"]
  allowedHttpHeaders = ["Accept", "Content-Type", "Authorization", "Origin", "X-Requested-With"]
  exposedHeaders = []
  supportsCredentials = true
  preflightMaxAge = 3 days
}

# Allow Kubernetes health check probes
# Kubernetes sends health checks with pod IPs in the Host header
play.filters.hosts {
  allowed = ["."]
}
